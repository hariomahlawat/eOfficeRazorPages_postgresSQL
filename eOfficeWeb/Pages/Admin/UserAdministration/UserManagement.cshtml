@page
@using Microsoft.AspNetCore.Identity;
@using eOffice.Utility;
@model eOfficeWeb.Pages.Admin.UserAdministration.UserManagementModel
@{
    @inject SignInManager<ApplicationUser> SignInManager

    @inject UserManager<ApplicationUser> UserManager
}

<div class="container">
    <div class="row">
        <div class="col-12">
            <h4 class="text-primary display-5" @*style="font-family: 'Brush Script MT', cursive;"*@>User Administration : Manage Users</h4>
            <hr/>

            @*table for events*@
            <div class="row">
                <table id="tableDakList" class="table table-borderless" style="width:100%">
                    <thead>
                        <tr>
                            <th style="display:none">Id</th>
                            <th></th>
                        </tr>
                   </thead>
                   <tbody>
                        @foreach (var obj in @Model.Users)
                        {
                            <tr>
                                <td style="display:none">@obj.Id</td>
                                <td>
                                    <div class="card-body border bg-light">
                                        <div class="row">
                                            <div class="col-md-1 mx-1">
                                                <center>
                                                    <img class="img-fluid" src="~/images/generaluser.png" style="max-width:55px">
                                                    @if (obj.IsEnabled == true)
                                                    {
                                                        <span class="badge badge-success" style="color:forestgreen">Active User</span>
                                                    }
                                                    else
                                                    {
                                                        <span class="badge badge-danger" style="color:red">User Disabled</span>
                                                    }
                                                </center>
                                            </div>
                                            <div class="col-md-3 mx-1">
                                                <span class="fs-6" style="word-wrap: break-word">
                                                    <strong>Username : @obj.UserName </strong><br />
                                                    @obj.Rank  @obj.FirstName  @obj.LastName <br />
                                                    <strong>Roles Assigned : </strong>
                                                   @* @{
                                                        var roles = await UserManager.GetRolesAsync(obj);
                                                    }
                                                    @foreach (var role in roles)
                                                    {
                                                            <span>@role &nbsp;</span>
                                                    }*@
                                                </span>
                                            </div>

                                            <div class="col-md-2 mx-1" style="word-wrap: break-word">
                                                <span class="fs-6">
                                                    <strong>Claims Assigned</strong> <br/>
                                                    Office Branch : @obj.OfficeBranch <br/>
                                                    Office Section : @obj.OfficeBranchSection <br/>
                                                </span>
                                            </div>
                                            <div class="col-md-5 mx-1" style="word-wrap: break-word">
                                                <a asp-page="/Admin/UserAdministration/EditUser" asp-route-id="@obj.Id" class="btn btn-sm btn-outline-primary">
                                                    Edit User / Assign Branch
                                                </a> 
			                                     <a asp-page="/Admin/UserAdministration/EditOfficeSection" asp-route-userId="@obj.Id" class="btn btn-sm btn-outline-primary my-1">
                                                    Edit Office Section
                                                </a>
                                                <a asp-page="/Admin/UserAdministration/ResetPasswordByAdmin" asp-route-userId="@obj.Id" class="btn btn-sm btn-outline-danger my-1">
                                                    Reset Password
                                                </a>
                                                @if (obj.IsEnabled == true)
                                                {
                                                    <a asp-page="/Admin/UserAdministration/UserActivation" asp-route-id="@obj.Id" class="btn btn-sm btn-outline-danger my-1">
                                                        Disable User
                                                    </a>
                                                }
                                                else
                                                {
                                                    <a asp-page="/Admin/UserAdministration/UserActivation" asp-route-id="@obj.Id" class="btn btn-sm btn-outline-success my-1">
                                                        Activate User
                                                    </a>
                                                }
                                                
                                            </div>
                                        </div>
                                        
                                    </div>
                                </td>                            
                            </tr>
                        }
                   </tbody>
                </table>

        </div>
    </div>






</div>



    @section Scripts{
        <script src="~/js/dak.js"></script>

    }
